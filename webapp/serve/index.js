!function(e){var t={};function o(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=t,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=21)}([function(e,t){e.exports=require("@babel/runtime/helpers/asyncToGenerator")},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t){e.exports=require("koa-router")},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var core_js_modules_es_array_sort__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7),core_js_modules_es_array_sort__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_sort__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_promise__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(9),core_js_modules_es_promise__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_promise__WEBPACK_IMPORTED_MODULE_1__),enterModule;enterModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0,enterModule&&enterModule(module);var __signature__="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},MongoClient=__webpack_require__(15).MongoClient,ObjectID=__webpack_require__(15).ObjectID,config=__webpack_require__(4);class Db{static getInstance(){return Db.instance||(Db.instance=new Db),Db.instance}constructor(){this.dbClient="",this.connect()}connect(){var e=this;return new Promise((t,o)=>{if(e.dbClient)t(e.dbClient);else{console.log("数据库连接中...");var r="mongodb://".concat(config.dbUsername,":").concat(encodeURIComponent(config.dbPassword),"@").concat(config.dbhost,"/").concat(config.dbName),n=new MongoClient(r,{useNewUrlParser:!0});n.connect(r=>{if(r)console.log("数据库连接失败！"),o(r);else{console.log("数据库连接成功！");var a=n.db(config.dbName);e.dbClient=a,t(e.dbClient)}})}})}count(e,t,o){return new Promise((r,n)=>{this.connect().then(a=>{a.collection(e).countDocuments(t,o,(e,t)=>{e?n(e):r(t)})})})}find(e,t,o,r,n){return new Promise((a,i)=>{this.connect().then(d=>{d.collection(e).find(t,o||{}).sort(r||{addTime:-1}).project(n||{}).toArray((e,t)=>{e?i(e):a(t)})})})}findOne(e,t,o){return new Promise((r,n)=>{this.connect().then(n=>{n.collection(e).findOne(t,o).then(e=>{r(e)})})})}insert(e,t){return new Promise((o,r)=>{this.connect().then(n=>{n.collection(e).insertOne(t,(e,t)=>{e?r(e):o(t)})})})}update(e,t,o){return new Promise((r,n)=>{this.connect().then(a=>{a.collection(e).updateOne(t,{$set:o},(e,t)=>{e?n(e):r(t)})})})}remove(e,t){return new Promise((o,r)=>{this.connect().then(n=>{n.collection(e).removeOne(t,(e,t)=>{e?r(e):o(t)})})})}getObjectID(e){return new ObjectID(e)}__reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}var _default=Db.getInstance(),reactHotLoader,leaveModule;__webpack_exports__.default=_default,reactHotLoader="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0,reactHotLoader&&(reactHotLoader.register(MongoClient,"MongoClient","G:\\project\\kacoro\\koa-mongod\\server\\module\\db.js"),reactHotLoader.register(ObjectID,"ObjectID","G:\\project\\kacoro\\koa-mongod\\server\\module\\db.js"),reactHotLoader.register(Db,"Db","G:\\project\\kacoro\\koa-mongod\\server\\module\\db.js"),reactHotLoader.register(_default,"default","G:\\project\\kacoro\\koa-mongod\\server\\module\\db.js")),leaveModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0,leaveModule&&leaveModule(module)}.call(this,__webpack_require__(1)(module))},function(e,t,o){"use strict";o.r(t),function(e){var o;(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var r,n,a={dbhost:"129.226.142.123:27017",dbName:"kacoro",dbUsername:"kacoro",dbPassword:"wsWJ0318.+",tokenSecret:"yourtokensecret",saltRounds:10,webapp:"webapp"};t.default=a,(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&r.register(a,"default","G:\\project\\kacoro\\koa-mongod\\config.js"),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&n(e)}.call(this,o(1)(e))},function(e,t){e.exports=require("mongoose")},function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("core-js/modules/es.array.sort")},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("core-js/modules/es.promise")},function(e,t,o){"use strict";(function(e){o.d(t,"b",(function(){return l})),o.d(t,"a",(function(){return c})),o.d(t,"c",(function(){return s}));o(7);var r,n=o(0),a=o.n(n);(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var i,d,u=o(37),l=function(){var e=a()((function*(e,t){var o=yield u.countDocuments(),r=e.query,n=Number(r.page)||1,a=Number(r.size)||10,i=(n-1)*a,d=yield u.find({}).skip(i).limit(a).sort({createTime:-1}),l=o-(n-1)*a>a,c=Math.ceil(o/a);yield e.render("admin/users/index",{title:"首页",list:d,page:n,size:a,hasMore:l,totle:o,hasMore:l,num:c})}));return function(t,o){return e.apply(this,arguments)}}(),c=function(){var e=a()((function*(e,t){var o=e.query.id,r=yield u.findById(o);yield e.render("admin/users/edit",{list:r,currentNav:"/admin/users"})}));return function(t,o){return e.apply(this,arguments)}}(),s=function(){var e=a()((function*(e,t){var o=e.query.id;yield u.findByIdAndRemove(o);e.redirect("/admin/users")}));return function(t,o){return e.apply(this,arguments)}}();(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(i.register(l,"list","G:\\project\\kacoro\\koa-mongod\\server\\controllers\\user.js"),i.register(c,"edit","G:\\project\\kacoro\\koa-mongod\\server\\controllers\\user.js"),i.register(s,"remove","G:\\project\\kacoro\\koa-mongod\\server\\controllers\\user.js")),(d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&d(e)}).call(this,o(1)(e))},function(e,t,o){"use strict";(function(e){var r,n=o(5),a=o.n(n),i=o(4);(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var d="mongodb://".concat(i.default.dbUsername,":").concat(encodeURIComponent(i.default.dbPassword),"@").concat(i.default.dbhost,"/").concat(i.default.dbName);a.a.connect(d,{useNewUrlParser:!0,useUnifiedTopology:!0}),a.a.connection.on("connected",(function(){console.log("Mongoose connection open to "+d)})),a.a.connection.on("error",(function(e){console.log("Mongoose connection error: "+e)})),a.a.connection.on("disconnected",(function(){console.log("Mongoose connection disconnected")}));var u,l,c=a.a;t.a=c,(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(u.register(d,"DB_URL","G:\\project\\kacoro\\koa-mongod\\server\\module\\mongoose.js"),u.register(c,"default","G:\\project\\kacoro\\koa-mongod\\server\\module\\mongoose.js")),(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&l(e)}).call(this,o(1)(e))},function(e,t){e.exports=require("core-js/modules/es.array.iterator")},function(e,t){e.exports=require("core-js/modules/es.string.replace")},function(e,t){e.exports=require("core-js/modules/web.dom-collections.iterator")},function(e,t){e.exports=require("mongodb")},function(e,t){e.exports=require("koa-passport")},function(e,t){e.exports=require("bcrypt")},function(e,t,o){"use strict";o.r(t),function(e){o(9);var r,n=o(0),a=o.n(n);(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var i,d,u=o(19),l=function(){var e=a()((function*(e){return u(JSON.parse(e)).then((function(e){return e}))}));return function(t){return e.apply(this,arguments)}}(),c=function(e){return new Promise((function(t,o){try{var r="";e.req.on("data",(function(e){r+=e})),e.req.on("end",(function(e){t(r)}))}catch(e){o(e)}}))},s={quillRender:l,getPostData:c};t.default=s,(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(i.register(l,"quillRender","G:\\project\\kacoro\\koa-mongod\\server\\module\\common.js"),i.register(c,"getPostData","G:\\project\\kacoro\\koa-mongod\\server\\module\\common.js"),i.register(s,"default","G:\\project\\kacoro\\koa-mongod\\server\\module\\common.js")),(d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&d(e)}.call(this,o(1)(e))},function(e,t){e.exports=require("render-quill")},function(e,t){e.exports=require("@babel/runtime/helpers/defineProperty")},function(e,t,o){"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;o(22)},function(e,t,o){(function(e){var t;(t="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&t(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,o(6);o(24);var r,n,a=o(25),i=o(67)("demo:server"),d=o(68),u=c(process.env.PORT||"3000"),l=d.createServer(a.callback());function c(e){var t=parseInt(e,10);return isNaN(t)?e:t>=0&&t}function s(e){if("listen"!==e.syscall)throw e;var t="string"==typeof u?"Pipe "+u:"Port "+u;switch(e.code){case"EACCES":console.error(t+" requires elevated privileges"),process.exit(1);break;case"EADDRINUSE":console.error(t+" is already in use"),process.exit(1);break;default:throw e}}function f(){var e=l.address(),t="string"==typeof e?"pipe "+e:"port "+e.port;i("Listening on "+t)}l.listen(u),l.on("error",s),l.on("listening",f),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(r.register(i,"debug","G:\\project\\kacoro\\koa-mongod\\server\\index.js"),r.register(u,"port","G:\\project\\kacoro\\koa-mongod\\server\\index.js"),r.register(l,"server","G:\\project\\kacoro\\koa-mongod\\server\\index.js"),r.register(c,"normalizePort","G:\\project\\kacoro\\koa-mongod\\server\\index.js"),r.register(s,"onError","G:\\project\\kacoro\\koa-mongod\\server\\index.js"),r.register(f,"onListening","G:\\project\\kacoro\\koa-mongod\\server\\index.js")),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&n(e)}).call(this,o(23)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){e.exports=require("module-alias/register")},function(e,t,o){"use strict";o.r(t),function(e,r){o(12),o(13),o(14);var n,a=o(0),i=o.n(a);(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var d=o(26),u=(o(27),o(28)),l=o(29),c=o(30),s=o(31),f=o(32),p=o(2)(),b=o(33),m=o(8),v=o(34),y=o(35),g=o(42),_=o(58),G=o(60),L=o(63),H=(o(64),o(65)),j=(o(66),o(6)),k=new d;k.keys=["newkey","oldkey"],new G,k.use(s({multipart:!0,formidable:{maxFileSize:209715200}})),b(k,{root:m.join(r,"views"),extname:".html",extension:"pug",debug:!1}),l(k),k.use(c({formLimit:"3mb",jsonLimit:"3mb",textLimit:"3mb",enableTypes:["json","form","text"]})),k.use(L({cookie:{secure:!1,maxAge:864e5}},k)),k.use(_.initialize()),k.use(_.session()),k.use(u()),k.use(f()),k.use(H(r+"/../static")),k.use(H(r+"/../webapp")),k.use(function(){var e=i()((function*(e,t){var o=new Date;console.log(e.request.url);var r=e.request.url.replace(/\?([^\?]*)$/,"");console.log("currentNav",r),e.state.currentNav=r,e.state.siteTitle="Kacoro's blog",yield t();var n=new Date-o;console.log("".concat(e.method," ").concat(e.url," - ").concat(n,"ms"))}));return function(t,o){return e.apply(this,arguments)}}());var h=j.createReadStream("./webapp/dist/index.html","utf-8"),w=function(){var e=i()((function*(e,t){e.type="html";var o='<title>测试</title>\n  <meta name="keywords" content="'.concat("登录",'">\n  <meta name="description" content="').concat("描述",'">\n  '),r=h.replace(/<title>([\S\s\t]*?)<\/title>/,o);e.body=r}));return function(t,o){return e.apply(this,arguments)}}();p.get("/webapp/*",(e,t)=>{t.send(200,renderToString(React.createElement(RoutingContext,null)))}),p.use(v),p.use(y),p.use(g),k.use(p.routes()).use(p.allowedMethods()),k.on("error",(e,t)=>{console.error("server error",e,t)});var M,q,x=k;t.default=x,(M="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(M.register(p,"router","G:\\project\\kacoro\\koa-mongod\\server\\app.js"),M.register(k,"app","G:\\project\\kacoro\\koa-mongod\\server\\app.js"),M.register(h,"htmlFile","G:\\project\\kacoro\\koa-mongod\\server\\app.js"),M.register(w,"redirect","G:\\project\\kacoro\\koa-mongod\\server\\app.js"),M.register(x,"default","G:\\project\\kacoro\\koa-mongod\\server\\app.js")),(q="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&q(e)}.call(this,o(1)(e),"/")},function(e,t){e.exports=require("koa")},function(e,t){e.exports=require("koa-views")},function(e,t){e.exports=require("koa-json")},function(e,t){e.exports=require("koa-onerror")},function(e,t){e.exports=require("koa-bodyparser")},function(e,t){e.exports=require("koa-body")},function(e,t){e.exports=require("koa-logger")},function(e,t){e.exports=require("koa-art-template")},function(e,t,o){"use strict";o.r(t),function(e){var r,n=o(20),a=o.n(n),i=o(0),d=o.n(i);function u(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var l=o(2)(),c=o(3),s=o(16);l.get("/",function(){var e=d()((function*(e){var t=yield c.count("news",{status:"on",cate_name:{$nin:["私密日志","政治","技术"]}}),o=e.query,r=Number(o.page)||1,n=Number(o.size)||9,a={limit:n,skip:(r-1)*n},i=yield c.find("news",{status:"on",cate_name:{$nin:["私密日志","政治","技术"]}},a,null,{title:1,addTime:1,note:1,_id:1}),d=t-(r-1)*n>n,u=Math.ceil(t/n);yield e.render("blog/index",{list:i,page:r,size:n,hasMore:d,totle:t,hasMore:d,num:u})}));return function(t){return e.apply(this,arguments)}}()),l.get("/news",function(){var e=d()((function*(e){var t={status:"on"},o=e.query,r=Number(o.page)||1,n=Number(o.size)||9,a=o.cate_name||"",i={limit:n,skip:(r-1)*n};a&&(t=Object.assign(t,{cate_name:a}));var d=yield c.count("news",t),u=yield c.find("news",t,i,null,{title:1,addTime:1,note:1,_id:1}),l=d-(r-1)*n>n,s=Math.ceil(d/n);yield e.render("blog/news/index",{list:u,page:r,size:n,hasMore:l,totle:d,hasMore:l,num:s,cate_name:a})}));return function(t){return e.apply(this,arguments)}}()),l.get("/news/detail",function(){var e=d()((function*(e){var t={status:"on"},{id:o}=e.query,r=Object.assign(t,{_id:c.getObjectID(o)}),n=yield c.findOne("news",r);n.thumbnails&&(n.thumbnails=JSON.parse(n.thumbnails));Object.assign(t,{cate_name:n.cate_name,addTime:{$gt:n.addTime}}),Object.assign(t,{cate_name:n.cate_name,addTime:{$lt:n.addTime}});var i=yield c.find("news",{cate_name:n.cate_name,status:"on",addTime:{$gt:n.addTime}},{limit:1},{addTime:1}),d=yield c.find("news",{cate_name:n.cate_name,status:"on",addTime:{$lt:n.addTime}},{limit:1},{addTime:-1}),l=null,s=null;i[0]&&(l=i[0]._id),d[0]&&(s=d[0]._id),yield e.render("blog/news/detail",function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?u(o,!0).forEach((function(t){a()(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):u(o).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({},n,{prevId:l,nextId:s}))}));return function(t){return e.apply(this,arguments)}}()),l.get("/about",function(){var e=d()((function*(e){yield e.render("blog/about")}));return function(t){return e.apply(this,arguments)}}()),l.get("/login",function(){var e=d()((function*(e){yield e.render("blog/login")}));return function(t){return e.apply(this,arguments)}}()),l.get("/logout",function(){var e=d()((function*(e){e.logout(),e.redirect("/")}));return function(t){return e.apply(this,arguments)}}()),l.post("/login",s.authenticate("local",{successRedirect:"/admin",failureRedirect:"/login"}),function(){var e=d()((function*(e){return s.authenticate("local",(function(t,o,r,n){return console.log("user",o),e.login(o)}))(e)}));return function(t){return e.apply(this,arguments)}}()),l.post("/comment/get",function(){var e=d()((function*(e){var{articleId:t}=e.request.body,o={articleId:t,status:"on"},r=yield c.find("comments",o,{},{addTime:1},{email:0,status:0,articleId:0});e.body=r?{code:200,data:r}:r}));return function(t){return e.apply(this,arguments)}}()),l.post("/comment/add",function(){var e=d()((function*(e){var t=yield c.insert("comments",Object.assign(e.request.body,{status:"on",addTime:new Date}));t.result.ok?e.body={code:200,data:t.ops[0]}:e.body=t.result}));return function(t){return e.apply(this,arguments)}}()),l.get("/upload/userIcon/*.jpg",function(){var e=d()((function*(e){404==e.status&&e.response.redirect("/upload/userIcon/icon-user.png")}));return function(t){return e.apply(this,arguments)}}());var f,p,b=l.routes();t.default=b,(f="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(f.register(l,"router","G:\\project\\kacoro\\koa-mongod\\server\\routes\\index.js"),f.register("blog","tplName","G:\\project\\kacoro\\koa-mongod\\server\\routes\\index.js"),f.register(b,"default","G:\\project\\kacoro\\koa-mongod\\server\\routes\\index.js")),(p="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&p(e)}.call(this,o(1)(e))},function(e,t,o){"use strict";o.r(t),function(e){var r,n=o(0),a=o.n(n);(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var i=o(2)(),d=o(36),u=o(38),l=o(39),c=o(40),s=o(41);i.prefix("/admin"),i.get("*",function(){var e=a()((function*(e,t){console.log("ctx.isAuthenticated",e.isAuthenticated()),e.isAuthenticated()?yield t():e.redirect("/login")}));return function(t,o){return e.apply(this,arguments)}}()),i.get("/",function(){var e=a()((function*(e){yield e.render("admin/index")}));return function(t){return e.apply(this,arguments)}}()),i.use(d),i.use(l),i.use(u),i.use(s),i.use(c);var f,p,b=i.routes();t.default=b,(f="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(f.register(i,"router","G:\\project\\kacoro\\koa-mongod\\server\\routes\\admin.js"),f.register(b,"default","G:\\project\\kacoro\\koa-mongod\\server\\routes\\admin.js")),(p="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&p(e)}.call(this,o(1)(e))},function(e,t,o){"use strict";o.r(t),function(e){var r,n=o(0),a=o.n(n),i=o(10);(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var d=o(2)();o(3);d.prefix("/users"),d.get("/",i.b),d.get("/add",function(){var e=a()((function*(e){yield e.render("admin/users/add",{currentNav:"/admin/users"})}));return function(t){return e.apply(this,arguments)}}()),d.get("/edit",i.a),d.get("/delete",i.c);var u,l,c=d.routes();t.default=c,(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(u.register(d,"router","G:\\project\\kacoro\\koa-mongod\\server\\routes\\admin\\users.js"),u.register(c,"default","G:\\project\\kacoro\\koa-mongod\\server\\routes\\admin\\users.js")),(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&l(e)}.call(this,o(1)(e))},function(e,t,o){"use strict";o.r(t),function(e){var r,n=o(11);(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var a,i,d=n.a.Schema,u=new d({username:{type:String},username:{type:String},age:{type:Number},logindate:{type:Date},status:{type:Number},password:{type:String},nickname:{type:String},createTime:{type:Date,default:Date.now}}),l=n.a.model("User",u);t.default=l,(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(a.register(d,"Schema","G:\\project\\kacoro\\koa-mongod\\server\\models\\user.js"),a.register(u,"UserSchema","G:\\project\\kacoro\\koa-mongod\\server\\models\\user.js"),a.register(l,"default","G:\\project\\kacoro\\koa-mongod\\server\\models\\user.js")),(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&i(e)}.call(this,o(1)(e))},function(e,t,o){"use strict";o.r(t),function(e){var r,n=o(0),a=o.n(n);(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var i=o(2)(),d=o(3);i.prefix("/news"),i.get("/",function(){var e=a()((function*(e){var t={},o=e.query,r=Number(o.page)||1,n=Number(o.size)||10,a=o.cate_name||"";a&&(t=Object.assign(t,{cate_name:a}));var i={limit:n,skip:(r-1)*n},u=yield d.count("news",t),l=yield d.find("news",t,i),c=u-(r-1)*n>n,s=Math.ceil(u/n),f=yield d.find("news_cate",{},{},{sort:1});yield e.render("admin/news/index",{title:"首页",list:l,page:r,size:n,hasMore:c,totle:u,hasMore:c,num:s,cate:f,cate_name:a})}));return function(t){return e.apply(this,arguments)}}()),i.get("/add",function(){var e=a()((function*(e){var t=e.query.cate_name||"",o=yield d.find("news_cate",{},{},{sort:1});yield e.render("admin/news/add",{currentNav:"/admin/news",cate:o,cate_name:t})}));return function(t){return e.apply(this,arguments)}}()),i.get("/edit",function(){var e=a()((function*(e){var t=e.query.id,o=yield d.find("news",{_id:d.getObjectID(t)}),r=yield d.find("news_cate",{},{},{sort:1}),n=o[0].thumbnails;n&&(o[0].thumbnails=JSON.parse(n)),yield e.render("admin/news/edit",{list:o[0],currentNav:"/admin/news",cate:r})}));return function(t){return e.apply(this,arguments)}}()),i.get("/delete",function(){var e=a()((function*(e){var t=e.query.id;yield d.remove("news",{_id:d.getObjectID(t)});e.redirect("/admin/news")}));return function(t){return e.apply(this,arguments)}}());var u,l,c=i.routes();t.default=c,(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(u.register(i,"router","G:\\project\\kacoro\\koa-mongod\\server\\routes\\admin\\news.js"),u.register(c,"default","G:\\project\\kacoro\\koa-mongod\\server\\routes\\admin\\news.js")),(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&l(e)}.call(this,o(1)(e))},function(e,t,o){"use strict";o.r(t),function(e){var r,n=o(0),a=o.n(n);(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var i=o(2)(),d=o(3);i.prefix("/newscate"),i.get("/",function(){var e=a()((function*(e){var t=yield d.count("newscate"),o=e.query,r=Number(o.page)||1,n=Number(o.size)||10,a={limit:n,skip:(r-1)*n},i=yield d.find("news_cate",{},a,{sort:1});console.log(i);var u=t-(r-1)*n>n,l=Math.ceil(t/n);yield e.render("admin/newscate/index",{title:"首页",list:i,page:r,size:n,hasMore:u,totle:t,hasMore:u,num:l})}));return function(t){return e.apply(this,arguments)}}()),i.get("/add",function(){var e=a()((function*(e){yield e.render("admin/newscate/add",{currentNav:"/admin/newscate"})}));return function(t){return e.apply(this,arguments)}}()),i.get("/edit",function(){var e=a()((function*(e){var t=e.query.id,o=yield d.find("news_cate",{_id:d.getObjectID(t)});yield e.render("admin/newscate/edit",{list:o[0],currentNav:"/admin/newscate"})}));return function(t){return e.apply(this,arguments)}}()),i.get("/delete",function(){var e=a()((function*(e){var t=e.query.id;yield d.remove("news_cate",{_id:d.getObjectID(t)});e.redirect("/admin/newscate")}));return function(t){return e.apply(this,arguments)}}());var u,l,c=i.routes();t.default=c,(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(u.register(i,"router","G:\\project\\kacoro\\koa-mongod\\server\\routes\\admin\\newscate.js"),u.register(c,"default","G:\\project\\kacoro\\koa-mongod\\server\\routes\\admin\\newscate.js")),(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&l(e)}.call(this,o(1)(e))},function(e,t,o){"use strict";o.r(t),function(e){var r,n=o(0),a=o.n(n);(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var i=o(2)(),d=o(3);i.prefix("/comments"),i.get("/",function(){var e=a()((function*(e){var t={},o=e.query,r=Number(o.page)||1,n=Number(o.size)||10,a={limit:n,skip:(r-1)*n},i=yield d.count("comments",t),u=yield d.find("comments",t,a),l=i-(r-1)*n>n,c=Math.ceil(i/n);yield e.render("admin/comments/index",{title:"首页",list:u,page:r,size:n,hasMore:l,totle:i,num:c})}));return function(t){return e.apply(this,arguments)}}()),i.get("/add",function(){var e=a()((function*(e){var t=e.query.cate_name||"",o=yield d.find("comments",{},{},{sort:1});yield e.render("admin/comments/add",{currentNav:"/admin/comments",cate:o,cate_name:t})}));return function(t){return e.apply(this,arguments)}}()),i.get("/edit",function(){var e=a()((function*(e){var t=e.query.id,o=yield d.find("comments",{_id:d.getObjectID(t)});console.log(o),yield e.render("admin/comments/edit",{list:o[0],currentNav:"/admin/comments"})}));return function(t){return e.apply(this,arguments)}}()),i.get("/delete",function(){var e=a()((function*(e){var t=e.query.id;yield d.remove("news",{_id:d.getObjectID(t)});e.redirect("/admin/comments")}));return function(t){return e.apply(this,arguments)}}());var u,l,c=i.routes();t.default=c,(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(u.register(i,"router","G:\\project\\kacoro\\koa-mongod\\server\\routes\\admin\\comments.js"),u.register(c,"default","G:\\project\\kacoro\\koa-mongod\\server\\routes\\admin\\comments.js")),(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&l(e)}.call(this,o(1)(e))},function(e,t,o){"use strict";o.r(t),function(e){var r,n=o(0),a=o.n(n);(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var i=o(2)();i.prefix("/focus"),i.get("/",function(){var e=a()((function*(e){yield e.render(".dmin/focus/index")}));return function(t){return e.apply(this,arguments)}}()),i.get("/add",function(){var e=a()((function*(e){yield e.render("admin/focus/add")}));return function(t){return e.apply(this,arguments)}}()),i.get("/edit",function(){var e=a()((function*(e){yield e.render("admin/focus/edit")}));return function(t){return e.apply(this,arguments)}}()),i.get("/delete",function(){var e=a()((function*(e){e.body="this is a users response!"}));return function(t){return e.apply(this,arguments)}}());var d,u,l=i.routes();t.default=l,(d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(d.register(i,"router","G:\\project\\kacoro\\koa-mongod\\server\\routes\\admin\\focus.js"),d.register(l,"default","G:\\project\\kacoro\\koa-mongod\\server\\routes\\admin\\focus.js")),(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&u(e)}.call(this,o(1)(e))},function(e,t,o){"use strict";o.r(t),function(e){var r,n=o(0),a=o.n(n);(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var i=o(2)(),d=o(43),u=o(44),l=o(46),c=o(47),s=o(48),f=o(57);i.prefix("/api"),i.post("/*",function(){var e=a()((function*(e,t){console.log("ctx.isAuthenticated",e.isAuthenticated()),e.isAuthenticated()?yield t():(e.status=401,e.body={msg:"auth fail"})}));return function(t,o){return e.apply(this,arguments)}}()),i.post("/",function(){var e=a()((function*(e){e.body="访问了api"}));return function(t){return e.apply(this,arguments)}}()),i.use(d),i.use(u),i.use(l),i.use(c),i.use(s),i.use(f);var p,b,m=i.routes();t.default=m,(p="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(p.register(i,"router","G:\\project\\kacoro\\koa-mongod\\server\\routes\\api.js"),p.register(m,"default","G:\\project\\kacoro\\koa-mongod\\server\\routes\\api.js")),(b="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&b(e)}.call(this,o(1)(e))},function(e,t,o){"use strict";o.r(t),function(e){var r,n=o(0),a=o.n(n);(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var i=o(2)(),d=o(3),u=o(4),l=o(17);i.prefix("/users"),i.post("/add",function(){var e=a()((function*(e){var{password:t}=e.request.body,o=yield d.insert("user",Object.assign(e.request.body,{password:l.hashSync(t,u.saltRounds)}));console.log(o.result),e.body="添加数据";try{o.result.ok&&e.redirect("/admin/users")}catch(t){e.redirect("/admin/users/add")}}));return function(t){return e.apply(this,arguments)}}()),i.post("/edit",function(){var e=a()((function*(e){console.log(e.request.body);var t=new Date,{id:o,username:r,age:n,sex:a,status:i,password:c,nickname:s,newPwd:f}=e.request.body;if(""!=f){var p=yield d.update("user",{_id:d.getObjectID(o)},{username:r,age:n,sex:a,status:i,password:l.hashSync(f,u.saltRounds),solt:t,nickname:s});console.log(p.result),e.body=p.result}else p=yield d.update("user",{_id:d.getObjectID(o)},{username:r,age:n,sex:a,status:i,nickname:s})}));return function(t){return e.apply(this,arguments)}}()),i.post("/delete",function(){var e=a()((function*(e){e.body="this is a users response!"}));return function(t){return e.apply(this,arguments)}}());var c,s,f=i.routes();t.default=f,(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(c.register(i,"router","G:\\project\\kacoro\\koa-mongod\\server\\routes\\api\\users.js"),c.register(f,"default","G:\\project\\kacoro\\koa-mongod\\server\\routes\\api\\users.js")),(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&s(e)}.call(this,o(1)(e))},function(e,t,o){"use strict";o.r(t),function(e){o(45),o(7);var r,n=o(0),a=o.n(n);(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var i=o(2)(),d=o(3);i.prefix("/news"),i.post("/add",function(){var e=a()((function*(e){var{content:t,sort:o}=e.request.body,r=yield d.insert("news",Object.assign(e.request.body,{content:t,sort:parseInt(o),addTime:new Date}));e.body=r.result}));return function(t){return e.apply(this,arguments)}}()),i.post("/edit",function(){var e=a()((function*(e){var{id:t,title:o,content:r,note:n,sort:a,keywords:i,description:u,status:l,cate_id:c,cate_name:s,thumbnails:f}=e.request.body,p=yield d.update("news",{_id:d.getObjectID(t)},{title:o,content:r,note:n,status:l,cate_id:c,keywords:i,description:u,cate_name:s,thumbnails:f,sort:parseInt(a),updateTime:new Date});e.body=p.result}));return function(t){return e.apply(this,arguments)}}()),i.post("/delete",function(){var e=a()((function*(e){var{id:t}=e.request.body;console.log(t);var o=yield d.remove("news",{_id:d.getObjectID(t)});e.body=o.result}));return function(t){return e.apply(this,arguments)}}());var u,l,c=i.routes();t.default=c,(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(u.register(i,"router","G:\\project\\kacoro\\koa-mongod\\server\\routes\\api\\news.js"),u.register(c,"default","G:\\project\\kacoro\\koa-mongod\\server\\routes\\api\\news.js")),(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&l(e)}.call(this,o(1)(e))},function(e,t){e.exports=require("core-js/modules/es.symbol.description")},function(e,t,o){"use strict";o.r(t),function(e){o(7);var r,n=o(0),a=o.n(n);(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var i=o(2)(),d=o(3),{quillRender:u}=o(18);i.prefix("/newscate"),i.post("/",function(){var e=a()((function*(e){var{content:t}=e.request.body,o=yield u(t),r=yield d.insert("news",Object.assign(e.request.body,{content:o,addTime:new Date}));e.body=r.result}));return function(t){return e.apply(this,arguments)}}()),i.post("/add",function(){var e=a()((function*(e){var{content:t}=e.request.body,o=yield u(t),r=yield d.insert("news_cate",Object.assign(e.request.body,{content:o,addTime:new Date}));e.body=r.result}));return function(t){return e.apply(this,arguments)}}()),i.post("/edit",function(){var e=a()((function*(e){var{id:t,name:o,content:r,note:n,status:a,sort:i}=e.request.body,l=yield u(r),c=yield d.update("news_cate",{_id:d.getObjectID(t)},{name:o,content:l,note:n,status:a,sort:i});e.body=c.result}));return function(t){return e.apply(this,arguments)}}()),i.post("/delete",function(){var e=a()((function*(e){var{id:t}=e.request.body;console.log(t);var o=yield d.remove("news_cate",{_id:d.getObjectID(t)});e.body=o.result}));return function(t){return e.apply(this,arguments)}}());var l,c,s=i.routes();t.default=s,(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(l.register(i,"router","G:\\project\\kacoro\\koa-mongod\\server\\routes\\api\\newscate.js"),l.register(s,"default","G:\\project\\kacoro\\koa-mongod\\server\\routes\\api\\newscate.js")),(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&c(e)}.call(this,o(1)(e))},function(e,t,o){"use strict";o.r(t),function(e){var r,n=o(0),a=o.n(n);(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var i=o(2)();i.prefix("/focus"),i.get("/",function(){var e=a()((function*(e){yield e.render(".dmin/focus/index")}));return function(t){return e.apply(this,arguments)}}()),i.get("/add",function(){var e=a()((function*(e){yield e.render("admin/focus/add")}));return function(t){return e.apply(this,arguments)}}()),i.get("/edit",function(){var e=a()((function*(e){yield e.render("admin/focus/edit")}));return function(t){return e.apply(this,arguments)}}()),i.get("/delete",function(){var e=a()((function*(e){e.body="this is a users response!"}));return function(t){return e.apply(this,arguments)}}());var d,u,l=i.routes();t.default=l,(d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(d.register(i,"router","G:\\project\\kacoro\\koa-mongod\\server\\routes\\api\\focus.js"),d.register(l,"default","G:\\project\\kacoro\\koa-mongod\\server\\routes\\api\\focus.js")),(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&u(e)}.call(this,o(1)(e))},function(e,t,o){"use strict";o.r(t),function(e,r){o(12),o(14);var n,a=o(0),i=o.n(a);(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var d=o(2)(),u=(o(3),o(6)),l=o(8),c=o(49),{uploadFile:s}=o(50),{getStat:f,mkdir:p,dirExists:b}=o(56);d.prefix("/upload"),d.post("/",function(){var e=i()((function*(e){var t=c().format("YYYY-MM-DD/HH/"),o=l.join(r,"../../public/upload/"+t);yield b(o);var n=e.request.files.file,a=u.createReadStream(n.path),i=o+"/".concat(n.name),d=u.createWriteStream(i);return a.pipe(d),e.body={msg:"上传成功",filePath:"/upload/"+t+n.name,fileName:n.name}}));return function(t){return e.apply(this,arguments)}}()),d.post("/multiple",function(){var e=i()((function*(e,t){var o=e.request.files.file;for(var n of o){var a=u.createReadStream(n.path),i=l.join(r,"../../public/upload/")+"/".concat(n.name),d=u.createWriteStream(i);a.pipe(d)}return e.body="上传成功！"}));return function(t,o){return e.apply(this,arguments)}}());var m,v,y=d.routes();t.default=y,(m="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(m.register(d,"router","G:\\project\\kacoro\\koa-mongod\\server\\routes\\api\\upload.js"),m.register(y,"default","G:\\project\\kacoro\\koa-mongod\\server\\routes\\api\\upload.js")),(v="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&v(e)}.call(this,o(1)(e),"/")},function(e,t){e.exports=require("dayjs")},function(e,t,o){"use strict";o.r(t),function(e){var t;o(9),o(51),o(52);(t="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&t(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var r,n,a=o(53).inspect,i=o(8),d=(o(54),o(6)),u=o(55);function l(e){return!!d.existsSync(e)||(l(i.dirname(e))?(d.mkdirSync(e),!0):void 0)}function c(e){var t=e.split(".");return t[t.length-1]}function s(e,t){var o=e.req,r=(e.res,new u({headers:o.headers})),n=t.fileType||"common",a=i.join(t.path,n);l(a);return new Promise((t,u)=>{console.log("文件上传中...");var l={success:!1,message:"",data:null};r.on("file",(function(o,r,u,s,f){var p=Math.random().toString(16).substr(2)+"."+c(u),b=i.join(a,p),m=i.join(b);r.pipe(d.createWriteStream(m)),r.on("end",(function(){l.success=!0,l.message="文件上传成功",l.data={pictureUrl:"//".concat(e.host,"/image/").concat(n,"/").concat(p)},console.log("文件上传成功！"),t(l)}))})),r.on("finish",(function(){console.log("文件上结束"),t(l)})),r.on("error",(function(e){console.log("文件上出错"),u(l)})),o.pipe(r)})}e.exports={uploadFile:s},(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(r.register(a,"inspect","G:\\project\\kacoro\\koa-mongod\\server\\util\\upload.js"),r.register(l,"mkdirsSync","G:\\project\\kacoro\\koa-mongod\\server\\util\\upload.js"),r.register(c,"getSuffixName","G:\\project\\kacoro\\koa-mongod\\server\\util\\upload.js"),r.register(s,"uploadFile","G:\\project\\kacoro\\koa-mongod\\server\\util\\upload.js")),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&n(e)}.call(this,o(1)(e))},function(e,t){e.exports=require("core-js/modules/es.regexp.to-string")},function(e,t){e.exports=require("core-js/modules/es.string.split")},function(e,t){e.exports=require("util")},function(e,t){e.exports=require("os")},function(e,t){e.exports=require("busboy")},function(e,t,o){"use strict";o.r(t),function(e){o(9);var t,r=o(0),n=o.n(r);(t="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&t(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var a,i,d=o(6),u=o(8);function l(e){return new Promise((t,o)=>{d.stat(e,(e,o)=>{t(!e&&o)})})}function c(e){return new Promise((t,o)=>{d.mkdir(e,e=>{t(!e)})})}function s(e){return f.apply(this,arguments)}function f(){return(f=n()((function*(e){var t=yield l(e);if(t&&t.isDirectory())return!0;if(t)return!1;var o,r=u.parse(e).dir;return(yield s(r))&&(o=yield c(e)),o}))).apply(this,arguments)}exports.getStat=l,exports.mkdir=c,exports.dirExists=s,(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(a.register(l,"getStat","G:\\project\\kacoro\\koa-mongod\\server\\util\\dir.js"),a.register(c,"mkdir","G:\\project\\kacoro\\koa-mongod\\server\\util\\dir.js"),a.register(s,"dirExists","G:\\project\\kacoro\\koa-mongod\\server\\util\\dir.js")),(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&i(e)}.call(this,o(1)(e))},function(e,t,o){"use strict";o.r(t),function(e){o(7);var r,n=o(0),a=o.n(n);(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var i=o(2)(),d=o(3),{quillRender:u}=o(18);i.prefix("/comments"),i.post("/add",function(){var e=a()((function*(e){var{content:t,sort:o}=e.request.body,r=yield d.insert("news",Object.assign(e.request.body,{content:t,sort:parseInt(o),addTime:new Date}));e.body=r.result}));return function(t){return e.apply(this,arguments)}}()),i.post("/edit",function(){var e=a()((function*(e){var{id:t,name:o,email:r,website:n,content:a,replyId:i,status:u}=e.request.body,l=yield d.update("comments",{_id:d.getObjectID(t)},{name:o,email:r,content:a,website:n,replyId:i,status:u,updateTime:new Date});e.body=l.result}));return function(t){return e.apply(this,arguments)}}()),i.post("/delete",function(){var e=a()((function*(e){var{id:t}=e.request.body;console.log(t);var o=yield d.remove("comments",{_id:d.getObjectID(t)});e.body=o.result}));return function(t){return e.apply(this,arguments)}}());var l,c,s=i.routes();t.default=s,(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(l.register(i,"router","G:\\project\\kacoro\\koa-mongod\\server\\routes\\api\\comments.js"),l.register(s,"default","G:\\project\\kacoro\\koa-mongod\\server\\routes\\api\\comments.js")),(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&c(e)}.call(this,o(1)(e))},function(e,t,o){"use strict";o.r(t),function(e){var r,n=o(0),a=o.n(n);(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var i=o(16),d=o(59).Strategy,u=o(3),l=(o(4),o(17));i.serializeUser((function(e,t){t(null,e)})),i.deserializeUser(function(){var e=a()((function*(e,t){t(null,e)}));return function(t,o){return e.apply(this,arguments)}}()),i.use(new d({},function(){var e=a()((function*(e,t,o){var r=yield u.findOne("user",{username:e});return console.log("result",r),r&&l.compareSync(t,r.password)?void o(null,r,{msg:"this is a test"}):o(null,!1)}));return function(t,o,r){return e.apply(this,arguments)}}()));var c,s,f=i;t.default=f,(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(c.register(d,"LocalStrategy","G:\\project\\kacoro\\koa-mongod\\server\\module\\passport.js"),c.register(f,"default","G:\\project\\kacoro\\koa-mongod\\server\\module\\passport.js")),(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&s(e)}.call(this,o(1)(e))},function(e,t){e.exports=require("passport-local")},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(13),core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_0__),_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__),enterModule;enterModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0,enterModule&&enterModule(module);var __signature__="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},defaults=__webpack_require__(61),moment=__webpack_require__(62),quillRender=__webpack_require__(19);class ArtFilter{static getInstance(){return ArtFilter.instance||(ArtFilter.instance=new ArtFilter),Db.instance}constructor(){this.dbClient="",this.imports()}imports(){defaults.imports.dateFormat=function(e,t){return moment(e).format(t)},defaults.imports.slice=function(e,t){return e.length>t?e.replace(/\ +/g,"").replace(/[\r\n]/g,"").slice(0,t)+"...":e}}__reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}function quill(e){return _quill.apply(this,arguments)}function _quill(){return(_quill=_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()((function*(e){return quillRender(JSON.parse(e)).then((function(e){return e}))}))).apply(this,arguments)}var _default=ArtFilter,reactHotLoader,leaveModule;__webpack_exports__.default=_default,reactHotLoader="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0,reactHotLoader&&(reactHotLoader.register(ArtFilter,"ArtFilter","G:\\project\\kacoro\\koa-mongod\\server\\module\\artFilter.js"),reactHotLoader.register(quill,"quill","G:\\project\\kacoro\\koa-mongod\\server\\module\\artFilter.js"),reactHotLoader.register(_default,"default","G:\\project\\kacoro\\koa-mongod\\server\\module\\artFilter.js")),leaveModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0,leaveModule&&leaveModule(module)}.call(this,__webpack_require__(1)(module))},function(e,t){e.exports=require("art-template/lib/defaults")},function(e,t){e.exports=require("moment")},function(e,t){e.exports=require("koa-session")},function(e,t){e.exports=require("koa-redis")},function(e,t){e.exports=require("koa-static")},function(e,t){e.exports=require("koa-rewrite")},function(e,t){e.exports=require("debug")},function(e,t){e.exports=require("http")}]);